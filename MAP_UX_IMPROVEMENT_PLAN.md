# 🗺️ 지도 UX 개선 계획

**목적:** 카카오 네비/구글 맵 수준의 직관적이고 편안한 사용 경험 제공

---

## 📊 현재 상태 분석

### ✅ 잘 되어 있는 것
1. **검색 기능** - SearchBar로 장소 검색 가능
2. **내 위치** - 현재 위치 표시 및 이동
3. **경로 찾기** - FAB로 경로 계획 화면 이동
4. **레이어 토글** - 위험 유형별 필터
5. **경로 비교** - 안전/최소시간 경로 전환
6. **장소 정보** - PlaceDetailSheet로 상세 정보
7. **경로 결과** - RouteResultSheet로 경로 목록

### ❌ 개선 필요 사항

#### 1. **빠른 액세스 부족** (카카오 네비 벤치마킹)
**문제:**
- 긴급 상황에서 빠르게 안전한 곳을 찾기 어려움
- "집", "회사" 같은 자주 가는 곳 빠른 설정 없음
- 최근 목적지 접근 불편

**개선안:**
- 🔥 **긴급 버튼**: "가장 가까운 안전한 곳" 원탭 액세스
- 🏠 **퀵 액세스**: 집, 회사, 최근 목적지 빠른 선택
- ⭐ **즐겨찾기**: 자주 가는 곳 저장 및 빠른 접근

#### 2. **현재 안전도 표시 부족** (웨이즈 벤치마킹)
**문제:**
- 현재 위치가 안전한지 위험한지 알기 어려움
- 위험 지역에 진입해도 알림 없음
- 안전도 변화를 실시간으로 확인 불가

**개선안:**
- 🚦 **안전도 인디케이터**: 상단에 현재 위치 안전도 실시간 표시
  - 초록색: "현재 안전합니다"
  - 노란색: "주의 - 위험 지역 근처"
  - 빨간색: "경고 - 위험 지역 내"
- 📍 **위험 근접 알림**: 위험 지역 500m 이내 진입 시 경고

#### 3. **경로 안내 시작 불명확** (구글 맵 벤치마킹)
**문제:**
- 경로 선택 후 안내를 어떻게 시작하는지 불명확
- ETA (도착 예상 시간)가 명확하지 않음
- "안내 시작" 버튼이 눈에 잘 안 띔

**개선안:**
- 🚀 **큰 안내 시작 버튼**: 경로 선택 시 하단에 명확한 CTA
- ⏰ **명확한 ETA**: "15분 후 도착", "오후 3:25 도착" 표시
- 🛡️ **안전도 요약**: 경로의 안전도 점수와 위험 구간 수 표시

#### 4. **경로 비교 불편** (카카오 네비 벤치마킹)
**문제:**
- 안전 경로와 빠른 경로의 차이를 한눈에 비교하기 어려움
- 경로 전환 시 어떤 점이 다른지 불명확
- 시간, 거리, 안전도를 동시에 비교 불가

**개선안:**
- 📊 **경로 비교 카드**: 한 화면에 모든 경로 비교
  - 안전도 점수 (0-100)
  - 거리 (km)
  - 예상 시간 (분)
  - 위험 구간 수
- 🎨 **색상 구분**: 지도상 경로를 안전도에 따라 색상 표시
  - 안전 경로: 초록색
  - 보통 경로: 파란색
  - 위험 경로: 빨간색

#### 5. **위험 지역 시각화 부족** (웨이즈 벤치마킹)
**문제:**
- 위험 지역이 눈에 잘 안 띔
- 위험도 높은 곳과 낮은 곳 구분 어려움
- 위험 타입별 아이콘 불명확

**개선안:**
- 🎯 **위험 아이콘 개선**: 위험 유형별 명확한 아이콘
- 🌡️ **위험도 히트맵**: 위험도 높은 지역을 색상으로 강조
- ⚠️ **위험 알림 배지**: 위험 지역에 경고 배지 표시

#### 6. **검색 자동완성 부족** (구글 맵 벤치마킹)
**문제:**
- 검색 시 자동완성이 느리거나 없음
- 최근 검색 기록 표시 없음
- 카테고리별 검색 (병원, 대사관 등) 어려움

**개선안:**
- 🔍 **실시간 자동완성**: 입력 중 즉시 제안
- 📜 **최근 검색**: 최근 검색한 장소 빠른 접근
- 🏥 **카테고리 검색**: "가까운 병원", "대사관" 등 빠른 검색

---

## 🎯 우선순위별 구현 계획

### Phase 1: 긴급 안전 기능 (즉시 구현) ⚡
**목표:** 긴급 상황에서 빠르게 안전한 곳 찾기

1. **안전도 인디케이터** (상단)
   - 현재 위치 안전도 실시간 표시
   - 색상 + 텍스트로 명확히 전달
   - 위험 지역 진입 시 경고

2. **긴급 버튼** (지도 하단)
   - "가장 가까운 안전한 곳" 원탭
   - "긴급 대피" 경로 즉시 생성
   - UN 시설, 대사관, 병원 등 안전 시설 우선

3. **경로 안내 시작 개선**
   - RouteResultSheet에 큰 "안내 시작" 버튼
   - ETA 명확히 표시
   - 안전도 점수 표시

### Phase 2: 경로 비교 개선 (단기 구현) 📊
**목표:** 경로 선택을 더 쉽고 명확하게

1. **경로 비교 카드**
   - 안전도, 시간, 거리 한눈에 비교
   - 위험 구간 수 표시
   - 추천 경로 배지

2. **경로 색상 구분**
   - 안전도에 따라 경로 색상 변경
   - 위험 구간 강조 표시
   - 범례 추가

3. **경로 요약**
   - 주요 도로명
   - 예상 소요 시간
   - 안전도 등급 (A~F)

### Phase 3: 퀵 액세스 (중기 구현) 🚀
**목표:** 자주 사용하는 기능 빠른 접근

1. **퀵 액세스 패널**
   - 지도 하단 스와이프 패널
   - 집, 회사 빠른 설정
   - 최근 목적지 3개 표시

2. **즐겨찾기**
   - 자주 가는 곳 저장
   - 별표 표시
   - 즐겨찾기 목록 화면

3. **최근 목적지**
   - 최근 10개 목적지 저장
   - 시간순 정렬
   - 원탭으로 경로 재생성

### Phase 4: 고급 시각화 (장기 구현) 🎨
**목표:** 위험 정보를 더 직관적으로

1. **위험 히트맵**
   - 위험도 높은 지역 색상 오버레이
   - 실시간 업데이트
   - 투명도 조절 가능

2. **3D 위험 표시**
   - 위험도에 따라 높이 표시
   - 입체감 있는 시각화
   - 줌 레벨에 따라 자동 조절

3. **시간대별 위험도**
   - 오전/오후/야간 위험도 변화
   - 타임슬라이더로 확인
   - 예측 위험도 표시

---

## 💡 구체적 UI/UX 개선안

### 1. 안전도 인디케이터 (상단)

```
┌─────────────────────────────────────┐
│ 🟢 현재 안전합니다                     │
│ 주변에 위험 요소가 없습니다            │
└─────────────────────────────────────┘
```

**위치:** 검색바 바로 아래
**상태:**
- 🟢 안전 (0-30점): "현재 안전합니다"
- 🟡 주의 (31-60점): "주의 - 위험 지역 근처"
- 🔴 위험 (61-100점): "경고 - 위험 지역 내"

**인터랙션:**
- 탭하면 주변 위험 정보 상세 표시
- 위험 지역 진입 시 자동 확장
- 위험 회피 경로 제안

### 2. 긴급 버튼 (하단 패널)

```
┌─────────────────────────────────────┐
│ 🚨 가장 가까운 안전한 곳 (2.3km)      │
│ 📍 최근 목적지  🏠 집  💼 회사         │
└─────────────────────────────────────┘
```

**위치:** 지도 하단, FAB 위쪽
**버튼:**
- 🚨 긴급: 가장 가까운 안전 시설 (UN, 대사관, 병원)
- 📍 최근: 최근 목적지 3개
- 🏠 집: 등록한 집 위치
- 💼 회사: 등록한 회사 위치

### 3. 경로 안내 시작 (RouteResultSheet 개선)

**현재:**
```
┌─────────────────────────────────────┐
│ 경로 1: 안전 경로                     │
│ 5.2km • 15분                         │
└─────────────────────────────────────┘
```

**개선:**
```
┌─────────────────────────────────────┐
│ 🛡️ 안전 경로 (추천)                  │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│ 안전도: A (92점)        위험 구간: 0개 │
│ 거리: 5.2km             시간: 15분    │
│ 도착: 오후 3:25                       │
│                                       │
│ [     🚀 안내 시작하기    ]           │
└─────────────────────────────────────┘
```

**개선 사항:**
- ✅ 안전도 점수 명확히 표시 (A~F 등급)
- ✅ ETA 시간 표시 ("15분" + "오후 3:25")
- ✅ 위험 구간 수 표시
- ✅ 큰 "안내 시작" 버튼
- ✅ 추천 배지 표시

### 4. 경로 비교 카드

```
┌─────────────────────────────────────┐
│ 경로 비교                            │
│                                       │
│ ┌──────────────┐  ┌──────────────┐ │
│ │ 🛡️ 안전 경로   │  │ ⚡ 빠른 경로   │ │
│ │ A (92점)      │  │ C (68점)     │ │
│ │ 5.2km • 15분  │  │ 4.1km • 12분 │ │
│ │ 위험 0개       │  │ 위험 2개     │ │
│ │ [선택]        │  │ [ 선택 ]     │ │
│ └──────────────┘  └──────────────┘ │
└─────────────────────────────────────┘
```

**개선 사항:**
- 두 경로를 나란히 비교
- 안전도, 시간, 거리, 위험 구간 수 한눈에
- 추천 경로에 배지
- 탭 한 번으로 경로 선택

### 5. 위험 지역 시각화 개선

**현재:** 빨간 원으로만 표시

**개선:**
```
위험도별 색상:
- 높음 (80-100): 🔴 진한 빨강
- 중간 (50-79):  🟠 주황색
- 낮음 (0-49):   🟡 노란색

+ 아이콘 추가:
- 무력충돌: ⚔️
- 시위: 👥
- 검문소: 🛑
- 도로 손상: 🚧
- 자연재해: 🌊
```

---

## 🎨 UI 컴포넌트

### 새로 필요한 컴포넌트

1. **SafetyIndicator.js** - 안전도 인디케이터
2. **QuickAccessPanel.js** - 퀵 액세스 패널
3. **RouteComparisonCard.js** - 경로 비교 카드
4. **EmergencyButton.js** - 긴급 버튼

### 개선할 컴포넌트

1. **RouteResultSheet.js** - 안내 시작 버튼 추가
2. **RouteCard.js** - 안전도 점수 표시
3. **HazardMarker** - 아이콘 개선

---

## 📱 인터랙션 플로우

### 긴급 상황 플로우

```
사용자가 위험 지역 진입
    ↓
안전도 인디케이터 빨간색으로 변경
    ↓
"경고 - 위험 지역 내" 알림
    ↓
"가장 가까운 안전한 곳" 버튼 자동 표시
    ↓
탭하면 즉시 안전 경로 생성
    ↓
큰 "안내 시작" 버튼 표시
    ↓
한 번 탭으로 네비게이션 시작
```

### 일반 경로 찾기 플로우

```
사용자가 검색바 탭
    ↓
최근 목적지 / 즐겨찾기 표시
    ↓
목적지 입력 시 실시간 자동완성
    ↓
목적지 선택
    ↓
경로 비교 카드 표시 (안전/빠른)
    ↓
안전도, 시간, 거리 한눈에 비교
    ↓
경로 선택
    ↓
큰 "안내 시작" 버튼
    ↓
네비게이션 시작
```

---

## ✅ 성공 지표

### 사용성 지표
- [ ] 목적지 설정까지 탭 수: 3회 이하
- [ ] 경로 찾기까지 시간: 10초 이하
- [ ] 안내 시작까지 탭 수: 1회
- [ ] 긴급 대피 경로 생성: 5초 이하

### 시각적 명확성
- [ ] 현재 안전도 5초 이내 인지
- [ ] 경로 안전도 3초 이내 비교
- [ ] 위험 지역 즉시 식별

### 사용자 만족도
- [ ] "사용하기 편하다": 80% 이상
- [ ] "안전하다고 느낀다": 85% 이상
- [ ] "빠르게 찾을 수 있다": 90% 이상

---

## 🚀 구현 우선순위

### 즉시 구현 (오늘)
1. ✅ 안전도 인디케이터
2. ✅ 경로 안내 시작 버튼 개선
3. ✅ 경로 비교 카드
4. ✅ 긴급 버튼

### 단기 구현 (이번 주)
1. 퀵 액세스 패널
2. 즐겨찾기 기능
3. 최근 목적지

### 중기 구현 (이번 달)
1. 위험 히트맵
2. 시간대별 위험도
3. 검색 자동완성 개선

---

**목표:** 카카오 네비처럼 직관적하고, 구글 맵처럼 명확하며, VeriSafe만의 안전 중심 UX!
